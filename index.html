<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Metal \m/</title>
  <style media="screen">
    .choice {
      float: left;
      margin: 1em;
    }
    img {
      cursor: pointer;
      width: 200px;
      height: 140px;
      border: 4px solid black;
    }
    img:hover {
      border: 4px solid #6600CC;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
<h1>What is your favorite ?</h1>

<div class="choice left">
  <img>
  <div class="caption"></div>
  <div class="total"></div>
</div>
<div class="choice right">
  <img>
  <div class="caption"></div>
  <div class="total"></div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io();
  $(function () {
    // detect mouse overs
    $('.choice').hover(onhover,offHover);
    function onhover() {
      socket.emit('onhover', rightleft($(this)));
    }
    function offHover(){
      socket.emit('offhover',rightleft($(this)));
    }
  });
  // Return if the element is left || right
  function rightleft(element){
    var what = 'left';
    if(element.hasClass('right')) {
      what = 'right';
    }
    return what;
  }
  // update total
  socket.on('total', function (votes) {
    $(".left .total").html(votes.left.total);
    $(".right .total").html(votes.right.total);
  });
  // update the whole vote
  socket.on('votes', function (votes) {
    $(".left img").prop('src', votes.left.src);
    $(".left .caption").html(votes.left.name);
    $(".right img").prop('src', votes.right.src);
    $(".right .caption").html(votes.right.name);
  });
</script>

</body>
</html>